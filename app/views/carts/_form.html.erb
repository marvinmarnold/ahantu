<%= simple_form_for(@cart) do |f| %>
  <%= f.error_notification %>
  <div class="inputs">
    <h3><%= t "cart.edit.billing_information" %></h3>
    <%= render "shared/custom_errors", errors: @cart.errors[:billing_information_id] %>
    <% if current_user.billing_informations.present? %>
      <%= f.association :billing_information, collection: current_user.credit_cards %>
      <p>or</p>
    <% else %>
      <p><%= t "cart.edit.no_billing_information" %></p>
    <% end %>
    <%= link_to "Add Credit Card", new_credit_card_path, class: "btn" %>

    <h3><%= t "cart.edit.room_details.title" %></h3>
    <% @cart.bookings.each.with_index do |booking, i| %>
      <%= f.simple_fields_for :bookings, booking do |b| %>
        <h4><%= t "cart.edit.room_details.subtitle", i: i+1, item: b.object %></h4>
        <%= b.input :responsible_name, required: true %>
      <% end %>
    <% end %>

    <h3><%= t "cart.edit.contact_information" %></h3>
    <%= f.input :email, required: true, input_html: { value: current_user.email } %>
    <%= f.input :phone, required: true %>


  </div>

  <hr/>

  <div class="actions">
    <%= f.button :submit, t("cart.edit.submit", price: number_to_currency(@cart.total, locale: :en)), class: "btn btn-block btn-large btn-success" %>
  </div>
<% end %>